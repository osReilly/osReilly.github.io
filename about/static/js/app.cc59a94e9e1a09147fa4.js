webpackJsonp([2,0],[function(t,e,s){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}var i=s(12),n=o(i),r=s(74),l=o(r),a=s(73),c=o(a),d=s(66),p=o(d),u=s(67),f=o(u),v=s(69),h=o(v),m=s(70),x=o(m);s(49),n.default.use(l.default),n.default.use(c.default);var y=n.default.extend(p.default),g=new l.default({linkActiveClass:"active"});g.map({"/goods":{component:f.default},"/ratings":{component:h.default},seller:{component:x.default}}),g.start(y,"#app")},,,,,,,,,,,function(t,e,s){var o,i,n={};s(51),o=s(14),i=s(59),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports.default);var r="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;i&&(r.template=i),r.computed||(r.computed={}),Object.keys(n).forEach(function(t){var e=n[t];r.computed[t]=function(){return e}})},,function(t,e,s){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=s(21),n=o(i),r=s(68),l=o(r),a=0;e.default={data:function(){return{seller:{id:function(){return 0}()}}},created:function(){var t=this;this.$http.get("/api/seller?id="+this.seller.id).then(function(e){e=e.body,e.errno===a&&(t.seller=(0,n.default)({},t.seller,e.data))})},components:{"v-header":l.default}}},function(t,e,s){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=s(12),n=o(i);e.default={props:{food:{type:Object}},methods:{addCart:function(t){t._constructed&&(this.food.count?this.food.count++:n.default.set(this.food,"count",1),this.$dispatch("cart.add",t.target))},decreaseCart:function(t){t._constructed&&this.food.count&&(console.log(this.food.count),this.food.count--)}}}},function(t,e,s){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=s(5),n=o(i),r=s(71),l=o(r),a=s(11),c=o(a),d=0;e.default={props:{seller:{type:Object}},data:function(){return{goods:[],listHeight:[],scrollY:0}},created:function(){var t=this;this.classMap=["decrease","discount","guarantee","invoice","special"],this.$http.get("/api/goods").then(function(e){e=e.body,e.errno===d&&(t.goods=e.data,t.$nextTick(function(){t._initScroll(),t._caculateHeight()}))})},computed:{currentIndex:function(){for(var t=0;t<this.listHeight.length;t++){var e=this.listHeight[t],s=this.listHeight[t+1];if(!s||this.scrollY>=e&&this.scrollY<s)return t}return 0},selectFoods:function(){var t=[];return this.goods.forEach(function(e){e.foods.forEach(function(e){e.count&&t.push(e)})}),t}},methods:{selectMenu:function(t,e){if(console.log(t),e._constructed){var s=this.$els.foodsWrapper.getElementsByClassName("food-list-hook"),o=s[t];this.foodScroll.scrollToElement(o,300)}},_initScroll:function(){var t=this;this.menuScroll=new n.default(this.$els.menuWrapper,{click:!0}),this.foodScroll=new n.default(this.$els.foodsWrapper,{click:!0,probeType:3}),this.foodScroll.on("scroll",function(e){t.scrollY=Math.abs(Math.round(e.y))})},_caculateHeight:function(){var t=this.$els.foodsWrapper.getElementsByClassName("food-list-hook"),e=0;this.listHeight.push(e);for(var s=0;s<t.length;s++){var o=t[s];e+=o.clientHeight,this.listHeight.push(e)}},_drop:function(t){var e=this;this.$nextTick(function(){e.$refs.shopcart.drop(t)})}},events:{"cart.add":function(t){this._drop(t)}},components:{shopcart:l.default,cartcontrol:c.default}}},function(t,e,s){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=s(72),n=o(i);e.default={props:{seller:{type:Object}},data:function(){return{detailShow:!1}},methods:{showDetial:function(){this.detailShow=!0},closeDetial:function(){this.detailShow=!1}},created:function(){this.classMap=["decrease","discount","guarantee","invoice","special"]},components:{star:n.default}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={}},function(t,e,s){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=s(5),n=o(i),r=s(11),l=o(r);e.default={props:{selectFoods:{type:Array,default:function(){return[]}},deliveryPrice:{type:Number,default:0},minPrice:{type:Number,default:0}},data:function(){return{balls:[{show:!1},{show:!1},{show:!1},{show:!1},{show:!1},{show:!1}],dropBalls:[],fold:!0}},computed:{totalPrice:function(){var t=0;return this.selectFoods.forEach(function(e){t+=e.price*e.count}),t},totalCount:function(){var t=0;return this.selectFoods.forEach(function(e){t+=e.count}),t},payDesc:function(){if(0===this.totalPrice)return"￥"+this.minPrice+"元起送";if(this.totalPrice<this.minPrice){var t=this.minPrice-this.totalPrice;return"还差"+t+"元起送"}return"去结算"},payClass:function(){return this.totalPrice<this.minPrice?"not-enough":"enough"},listShow:function(){var t=this;if(!this.totalCount)return this.fold=!0,!1;var e=!this.fold;return e&&(this.scroll?this.scroll.refresh():this.$nextTick(function(){t.scroll=new n.default(t.$els.listContent,{click:!0})})),e}},methods:{drop:function(t){for(var e=0;e<this.balls.length;e++){var s=this.balls[e];if(!s.show)return s.show=!0,s.el=t,void this.dropBalls.push(s)}},toggleList:function(){this.totalCount&&(this.fold=!this.fold)},hideList:function(){this.fold=!0},empty:function(){this.selectFoods.forEach(function(t){t.count=0})},pay:function(){this.totalPrice<this.minPrice||window.alert("需要支付"+this.totalPrice+"元")}},transitions:{drop:{beforeEnter:function(t){for(var e=this.balls.length;e--;){var s=this.balls[e];if(s.show){var o=s.el.getBoundingClientRect(),i=o.left-32,n=-(window.innerHeight-o.top-22);t.style.display="",t.style.webkitTransform="translate3d(0,"+n+"px,0)",t.style.transform="translate3d(0,"+n+"px,0)";var r=t.getElementsByClassName("inner-hook")[0];r.style.webkitTransform="translate3d("+i+"px,0,0)",r.style.transform="translate3d("+i+"px,0,0)"}}},enter:function(t){t.offsetHeight;this.$nextTick(function(){t.style.display="",t.style.webkitTransform="translate3d(0,0,0)",t.style.transform="translate3d(0,0,0)";var e=t.getElementsByClassName("inner-hook")[0];e.style.webkitTransform="translate3d(0,0,0)",e.style.transform="translate3d(0,0,0)"})},afterEnter:function(t){var e=this.dropBalls.shift();e&&(e.show=!1,t.style.display="none")}}},components:{cartcontrol:l.default}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=5,o="on",i="half",n="off";e.default={props:{size:{type:Number},score:{type:Number}},computed:{starType:function(){return"star-"+this.size},itemClasses:function(){for(var t=[],e=Math.floor(2*this.score)/2,r=e%1!==0,l=Math.floor(e),a=0;a<l;a++)t.push(o);for(r&&t.push(i);t.length<s;)t.push(n);return t}}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){t.exports=' <div> <v-header :seller=seller></v-header> <div class="tab border-1px"> <div class=tab-item> <a v-link="{path:\'/goods\'}">商品</a> </div> <div class=tab-item> <a v-link="{path:\'/ratings\'}">评论</a> </div> <div class=tab-item> <a v-link="{path:\'/seller\'}">商家</a> </div> </div> <router-view :seller=seller keep-alive></router-view> </div> '},function(t,e){t.exports=' <div class=cartcontrol> <div class=cart-decrease v-if="food.count>0" @click=decreaseCart transition=move> <span class="inner icon-remove_circle_outline"></span> </div> <div class=cart-count v-if="food.count>0"> {{food.count}} </div> <div class="cart-add icon-add_circle" @click=addCart></div> </div> '},function(t,e){t.exports=' <div class=goods> <div class=menu-wrapper v-el:menu-wrapper> <ul> <li v-for="item in goods" class=menu-item :class="{\'current\':currentIndex === $index}" @click.stop.prevent=selectMenu($index,$event)> <span class="text border-1px"> <span v-show="item.type>0" class=icon :class=classMap[item.type]></span> {{item.name}}</span> </li> </ul> </div> <div class=foods-wrapper v-el:foods-wrapper> <ul> <li v-for="item in goods" class="food-list food-list-hook"> <h1 class=title>{{item.name}}</h1> <ul> <li v-for="food in item.foods" class="food-item border-1px"> <div class=icon> <img :src=food.icon width=57 height=57> </div> <div class=content> <h2 class=name>{{food.name}}</h2> <p class=desc>{{food.description}}</p> <div class=extra> <span class=count>月售{{food.sellerCount}}份</span><span>好评率{{food.rating}}%</span> </div> <div class=price> <span class=now>￥{{food.price}}</span><span class=old v-show=food.oldPrice>￥{{food.oldPrice}}</span> </div> <div class=cartcontrol-wrapper> <cartcontrol :food=food /> </div> </div> </li> </ul> </li> </ul> </div> <shopcart v-ref:shopcart :select-foods=selectFoods :delivery-price=seller.deliveryPrice :min-price=seller.minPrice /> </div> '},function(t,e){t.exports=' <div class=header> <div class=content-wrapper> <div class=avatar> <img :src=seller.avatar width=64 height=64> </div> <div class=content> <div class=title> <span class=brand></span> <span class=name>{{seller.name}}</span> </div> <div class=desc> {{seller.description}}/{{seller.deliveryTime}} </div> <div class=support v-if=seller.supports> <span class=icon :class=classMap[seller.supports[0].type]></span> <span class=text>{{seller.supports[0].description}}</span> </div> </div> <div class=support-count v-if=seller.supports @click=showDetial> <span class=count>{{seller.supports.length}}个</span> <i class=icon-keyboard_arrow_right></i> </div> </div> <div class=bulletin-wrapper @click=showDetial> <span class=bulletin-title></span><span class=bulletin-text>{{seller.bulletin}}</span> <i class=icon-keyboard_arrow_right></i> </div> <div class=background> <img :src=seller.avatar width=100% height=100%> </div> <div class=detail v-show=detailShow transition=fade> <div class="detail-wrapper clearfix"> <div class=detail-main> <h1 class=name>{{seller.name}}</h1> <div class=star-wrapper> <star :size=48 :score=seller.score></star> </div> <div class=title> <div class=line></div> <div class=text> 优惠信息 </div> <div class=line></div> </div> <ul v-if=seller.supports class=supports> <li class=support-item v-for="item in seller.supports"> <span class=icon :class=classMap[seller.supports[$index].type]></span> <span class=text>{{seller.supports[$index].description}}</span> </li> </ul> <div class=title> <div class=line></div> <div class=text> 商家公告 </div> <div class=line></div> </div> <div class=bulletin> <p class=content>{{seller.bulletin}}</p> </div> </div> </div> <div class=detail-close @click=closeDetial> <i class=icon-close></i> </div> </div> </div> '},function(t,e){t.exports=' <div class=""> ratings </div> '},function(t,e){t.exports=' <div class=""> seller </div> '},function(t,e){t.exports=' <div class=shopcart> <div class=content @click=toggleList> <div class=content-left> <div class=logo-wrapper> <div class=logo :class="{\'hightlight\':totalCount>0}"> <span class=icon-shopping_cart></span> </div> <div class=num v-show="totalCount>0"> {{totalCount}} </div> </div> <div class=price :class="{\'hightlight\':totalPrice>0}"> ￥{{totalPrice}}元 </div> <div class=desc> 另需配送费￥{{deliveryPrice}}元 </div> </div> <div class=content-right @click.stop=pay> <div class=pay :class=payClass> {{payDesc}} </div> </div> </div> <div class=ball-container> <div transition=drop class=ball v-for="ball in balls" v-show=ball.show> <div class="inner inner-hook"> </div> </div> </div> <div class=shopcart-list v-show=listShow transition=fold> <div class=list-header> <h1 class=title>购物车</h1> <span class=empty @click=empty>清空</span> </div> <div class=list-content v-el:list-content> <ul> <li class=food v-for="food in selectFoods"> <span class=name>{{food.name}}</span> <div class=price> <span>￥{{food.price * food.count}}</span> </div> <div class=cartcontrol-wrapper> <cartcontrol :food=food /> </div> </li> </ul> </div> </div> </div> <div class=list-mask v-show=listShow transition=fade @click=hideList> </div> '},function(t,e){t.exports=' <div class=star :class=starType :score=score> <span v-for="itemClass in itemClasses" :class=itemClass class=star-item track-by=$index></span> </div> '},function(t,e,s){var o,i,n={};s(50),o=s(13),i=s(58),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports.default);var r="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;i&&(r.template=i),r.computed||(r.computed={}),Object.keys(n).forEach(function(t){var e=n[t];r.computed[t]=function(){return e}})},function(t,e,s){var o,i,n={};s(52),o=s(15),i=s(60),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports.default);var r="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;i&&(r.template=i),r.computed||(r.computed={}),Object.keys(n).forEach(function(t){var e=n[t];r.computed[t]=function(){return e}})},function(t,e,s){var o,i,n={};s(53),o=s(16),i=s(61),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports.default);var r="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;i&&(r.template=i),r.computed||(r.computed={}),Object.keys(n).forEach(function(t){var e=n[t];r.computed[t]=function(){return e}})},function(t,e,s){var o,i,n={};s(56),o=s(17),i=s(62),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports.default);var r="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;i&&(r.template=i),r.computed||(r.computed={}),Object.keys(n).forEach(function(t){var e=n[t];r.computed[t]=function(){return e}})},function(t,e,s){var o,i,n={};s(57),o=s(18),i=s(63),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports.default);var r="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;i&&(r.template=i),r.computed||(r.computed={}),Object.keys(n).forEach(function(t){var e=n[t];r.computed[t]=function(){return e}})},function(t,e,s){var o,i,n={};s(54),o=s(19),i=s(64),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports.default);var r="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;i&&(r.template=i),r.computed||(r.computed={}),Object.keys(n).forEach(function(t){var e=n[t];r.computed[t]=function(){return e}})},function(t,e,s){var o,i,n={};s(55),o=s(20),i=s(65),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports.default);var r="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;i&&(r.template=i),r.computed||(r.computed={}),Object.keys(n).forEach(function(t){var e=n[t];r.computed[t]=function(){return e}})},,,function(t,e){}]);